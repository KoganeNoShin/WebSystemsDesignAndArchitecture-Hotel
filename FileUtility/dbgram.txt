// --- ENUMS (Per definire i valori fissi) ---

Enum Ruolo {
  CLIENTE
  STAFF
  AMMINISTRATORE
}

Enum StatoCamera {
  LIBERA
  OCCUPATA
  DA_PULIRE
}

Enum StatoPrenotazione {
  CONFERMATA    // Prenotata, cliente non ancora arrivato
  CHECKED_IN    // Cliente attualmente in hotel (Domotica attiva)
  CHECKED_OUT   // Cliente partito (Fatturazione e pulizie)
  CANCELLATA
}

// --- TABELLE UTENTI ---

Table utente {
  id integer [primary key, increment]
  username varchar [not null, unique]
  password varchar [not null]
  nome varchar [not null]
  cognome varchar [not null]
}

Table cliente {
  id integer [primary key, increment]
  cittadinanza varchar
  luogo varchar
  dataNascita varchar
  tipoDocumento varchar
  numDocumento varchar
  ref_utente integer [ref: - utente.id] // 1-to-1
}

Table dipendente {
  id integer [primary key, increment]
  ruolo Ruolo [not null]
  ref_sede integer [ref: > sede.id] // Many-to-1
  ref_utente integer [ref: - utente.id] // 1-to-1
}

// --- STRUTTURA HOTEL ---

Table sede {
  id integer [primary key, increment]
  nome varchar [not null]
  location varchar [not null]
  tassaSoggiorno varchar [not null]
}

Table camera {
  id integer [primary key, increment]
  ref_sede integer [ref: > sede.id]
  numero varchar [not null]
  postiLetto integer [not null]
  prezzoBase float [not null]
  tipologia varchar [default: 'Standard']
  status StatoCamera [not null]
  // Domotica
  luce boolean [not null, default: 0]
  tapparelle boolean [not null, default: 0]
  temperatura float [not null, default: 18.0]
}

// --- SERVIZI E MULTIMEDIA ---

Table service {
  id integer [primary key, increment]
  nome varchar [not null, unique]
  costo float [not null]
}

Table sede_service {
  id integer [primary key, increment]
  ref_sede integer [ref: > sede.id]
  ref_service integer [ref: > service.id]
}

Table multimedia {
  id integer [primary key, increment]
  nome varchar [not null]
  costo float [not null]
  immagine varchar
  descrizione varchar [note: 'length=1000']
  voto double
}

// --- PRENOTAZIONI ---

Table prenotazione {
  id integer [primary key, increment]
  ref_cliente integer [ref: > cliente.id]
  ref_camera integer [ref: > camera.id]
  dataInizio date [not null]
  dataFine date [not null]
  costo float [not null]
  numeroOspiti integer [not null, default: 1]
  stato StatoPrenotazione [not null]
}

// Collegamenti per acquisti extra
Table prenotazione_service {
  id integer [primary key, increment]
  ref_prenotazione integer [ref: > prenotazione.id]
  ref_service integer [ref: > service.id]
}

Table prenotazione_multimedia {
  id integer [primary key, increment]
  ref_prenotazione integer [ref: > prenotazione.id]
  ref_multimedia integer [ref: > multimedia.id]
}

// --- REPORTISTICA E NOTE ---
Table ospite {
  id integer [primary key, increment]
  nome varchar [not null]
  cognome varchar [not null]
  cittadinanza varchar [not null]
  luogo varchar [not null]
  dataNascita date [not null]
  ref_prenotazione integer [ref: > prenotazione.id]
}

Table nota {
  id integer [primary key, increment]
  testo varchar [not null, note: 'length=1000']
  dataCreazione timestamp
  ref_prenotazione integer [ref: > prenotazione.id]
}